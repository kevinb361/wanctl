# Standard RRUL test profile for latency validation
#
# Runs a full 2-minute RRUL (Realtime Response Under Load) test
# with 8 parallel streams to generate realistic congestion.
#
# Target: Dallas netperf server (104.200.21.31)
# Duration: 2 minutes with 5s warmup/cooldown
# Purpose: Thorough validation of latency control

name: rrul_standard
description: "2-minute RRUL test with 8 streams for full validation"
tool: flent
duration_seconds: 120
warmup_seconds: 5
cooldown_seconds: 5
host: "104.200.21.31"

parameters:
  # RRUL test generates bidirectional TCP traffic
  # with concurrent latency measurement
  test_name: rrul

  # 8 parallel streams saturate the link
  test_parameter_tcp_streams: 8

# Realistic SLAs for Spectrum cable (DOCSIS)
# Based on testing 2026-01-14: P95=120ms, P99=188ms, avg=64ms observed
# Original strict SLAs (p95=50, p99=100) were not achievable on DOCSIS
latency_slas:
  p95_max_ms: 150.0 # Allow headroom over observed 120ms
  p99_max_ms: 250.0 # Allow headroom over observed 188ms
  avg_max_ms: 80.0 # Allow headroom over observed 64ms
  max_bloat_over_baseline_ms: 60.0 # Allow headroom over observed 42ms
  flat_top_threshold_ms: 100.0
  flat_top_max_duration_sec: 3.0 # Observed 2.0s, allow headroom

controller_slas:
  max_response_time_ms: 2000.0 # Allow for EWMA lag
  min_rate_reduction_pct: 10.0
  require_state_transitions: true
