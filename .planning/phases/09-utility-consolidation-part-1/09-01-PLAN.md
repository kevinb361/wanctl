# Phase 9 Plan 1: Merge paths.py into path_utils.py

**Merge single-function paths.py into path_utils.py for cleaner organization.**

## Objective

Eliminate the 8-line paths.py by moving `get_cake_root()` into path_utils.py, reducing module fragmentation.

## Execution Context

@src/wanctl/paths.py (8 lines - source)
@src/wanctl/path_utils.py (114 lines - target)

## Context

**Current state:**
- `paths.py`: Single function `get_cake_root()` that returns project root via CAKE_ROOT env or file-based detection
- `path_utils.py`: Directory/file path utilities (ensure_directory_exists, ensure_file_directory, safe_file_path)

**Import analysis:**
```bash
grep -r "from wanctl.paths" src/ tests/
# Must find all consumers and update imports
```

## Tasks

### Task 1: Move get_cake_root() to path_utils.py

**File:** src/wanctl/path_utils.py

1. Read paths.py to get exact implementation
2. Add `get_cake_root()` to path_utils.py (at top, before other functions)
3. Add `import os` if not present (required by get_cake_root)
4. Verify no circular imports

### Task 2: Update all imports

1. Find all files importing from `wanctl.paths`:
   ```bash
   grep -rn "from wanctl.paths" src/ tests/
   grep -rn "import wanctl.paths" src/ tests/
   ```
2. Update each import: `from wanctl.paths import get_cake_root` â†’ `from wanctl.path_utils import get_cake_root`

### Task 3: Delete paths.py and verify

1. Delete src/wanctl/paths.py
2. Run tests: `uv run pytest tests/ -v --tb=short`
3. Run linting: `uv run ruff check src/wanctl/path_utils.py`

## Verification

```bash
# Confirm paths.py is deleted
ls src/wanctl/paths.py  # Should not exist

# Confirm no remaining imports
grep -rn "wanctl.paths" src/ tests/  # Should return empty

# All tests pass
uv run pytest tests/ -v --tb=short
```

## Success Criteria

- [ ] `get_cake_root()` moved to path_utils.py
- [ ] All imports updated (no references to wanctl.paths)
- [ ] paths.py deleted
- [ ] All 474 tests pass
- [ ] No linting errors

## Output

- Modified: src/wanctl/path_utils.py (adds get_cake_root)
- Deleted: src/wanctl/paths.py
- Modified: Consumer files (import updates)
