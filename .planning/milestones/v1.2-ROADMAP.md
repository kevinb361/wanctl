# Milestone v1.2: Configuration & Polish

**Status:** SHIPPED 2026-01-14
**Phases:** 16-20
**Total Plans:** 5

## Overview

Complete Phase2B rollout, improve configuration documentation and validation. This milestone focused on polish and preparation for Phase2B confidence-based steering production enablement.

## Phases

### Phase 16: Timer Interval Fix

**Goal**: Fix Phase2B timer decrement to use actual cycle interval instead of hardcoded 2s
**Depends on**: v1.1 complete
**Plans**: 1 plan

Plans:

- [x] 16-01: Fix Phase2B timer interval (add cycle_interval param, update decrements, add tests)

**Details:**
Fixed Phase2BController to accept cycle_interval parameter and use it for timer decrements instead of hardcoded 2-second assumption. This ensures correct timing behavior at 50ms cycle intervals.

### Phase 17: Config Documentation

**Goal**: Document EWMA alphas and baseline_rtt_bounds in CONFIG_SCHEMA.md; add bounds validation to autorate
**Depends on**: Phase 16
**Plans**: 1 plan

Plans:

- [x] 17-01: Document baseline_rtt_bounds, add autorate validation, update example configs

**Details:**
Added baseline_rtt_bounds documentation to CONFIG_SCHEMA.md with min/max validation (10-60ms). Added validation to autorate_continuous.py to reject invalid baseline RTT values.

### Phase 18: Deprecation Warnings

**Goal**: Add warnings for legacy steering params (bad_samples → red_samples_required, good_samples → green_samples_required)
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:

- [x] 18-01: Add deprecation warnings for bad_samples/good_samples, update docs

**Details:**
Added deprecation warnings at startup when legacy parameter names are used. Updated CONFIG_SCHEMA.md with deprecation notices and migration guidance.

### Phase 19: Config Edge Case Tests

**Goal**: Test boundary conditions, special characters, and long names in config validation
**Depends on**: Phase 18
**Plans**: 1 plan

Plans:

- [x] 19-01: Add edge case tests (boundary lengths, Unicode attacks, numeric boundaries)

**Details:**
Added 77 new tests for config validation edge cases including:
- Boundary length testing (64-char limit)
- Unicode/special character rejection
- Numeric boundary validation
- Security-focused input validation

### Phase 20: Phase2B Enablement

**Goal**: Enable confidence-based steering in production (dry_run mode for validation)
**Depends on**: Phase 19 + adequate dry-run validation data
**Plans**: 1 plan

Plans:

- [x] 20-01: Enable Phase2B confidence scoring (dry-run mode)

**Details:**
Enabled Phase2B confidence-based steering in production with dry_run=true. Config deployed to cake-spectrum, logs showing Phase2B controller initialized. Validation period of 1 week recommended before setting dry_run=false.

---

## Milestone Summary

**Key Decisions:**

- Conservative Phase2B thresholds (steer: 55, recovery: 20) for validation period
- 2s sustain duration (faster than reference, matches 50ms cycles)
- 30s hold-down (shorter for faster iteration during validation)
- dry_run=true default for safe production validation

**Issues Resolved:**

- Phase2B timer decrement using hardcoded 2s instead of cycle_interval
- Missing baseline_rtt_bounds documentation
- Legacy parameter names causing confusion (bad_samples/good_samples)

**Issues Deferred:**

- Phase2B production enablement (dry_run=false) - requires 1 week validation

**Technical Debt Incurred:**

- None

---

_For current project status, see .planning/ROADMAP.md_
